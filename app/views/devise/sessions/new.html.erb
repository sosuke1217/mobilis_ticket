<div class="min-vh-100 d-flex align-items-center justify-content-center bg-light">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-6 col-lg-4">
        <div class="card shadow-lg border-0">
          <div class="card-body p-5">
            <!-- ロゴとタイトル -->
            <div class="text-center mb-4">
              <div class="mb-3">
                <div class="logo-container">
                  <%= image_tag "mobilis-logo.png", alt: "Mobilis Logo", class: "logo-image" %>
                </div>
              </div>
              <h2 class="h3 text-dark mb-2">Mobilis</h2>
              <p class="text-muted">管理画面にログイン</p>
            </div>

            <!-- ログインフォーム -->
            <%= form_for(resource, as: resource_name, url: session_path(resource_name), html: { class: "needs-validation", novalidate: true }) do |f| %>
              <!-- メールアドレス -->
              <div class="mb-3">
                <%= f.label :email, "メールアドレス", class: "form-label fw-bold text-dark" %>
                <div class="input-group">
                  <span class="input-group-text bg-light border-end-0">
                    <i class="fas fa-envelope text-muted"></i>
                  </span>
                  <%= f.email_field :email, 
                      autofocus: true, 
                      autocomplete: "email",
                      class: "form-control border-start-0 text-start",
                      placeholder: "admin@example.com",
                      required: true,
                      style: "text-align: left !important; direction: ltr !important; text-align-last: left !important; text-align: left !important;" %>
                </div>
              </div>

              <!-- パスワード -->
              <div class="mb-3">
                <%= f.label :password, "パスワード", class: "form-label fw-bold text-dark" %>
                <div class="input-group">
                  <span class="input-group-text bg-light border-end-0">
                    <i class="fas fa-lock text-muted"></i>
                  </span>
                  <%= f.password_field :password, 
                      autocomplete: "current-password",
                      class: "form-control border-start-0 text-start",
                      placeholder: "パスワードを入力",
                      required: true,
                      style: "text-align: left !important; direction: ltr !important; text-align-last: left !important; text-align: left !important;" %>
                </div>
              </div>

              <!-- ログイン状態を保持 -->
              <% if devise_mapping.rememberable? %>
                <div class="mb-4">
                  <div class="form-check">
                    <%= f.check_box :remember_me, class: "form-check-input" %>
                    <%= f.label :remember_me, "ログイン状態を保持", class: "form-check-label text-muted" %>
                  </div>
                </div>
              <% end %>

              <!-- ログインボタン -->
              <div class="d-grid mb-3">
                <%= f.submit "ログイン", class: "btn btn-primary btn-lg fw-bold" %>
              </div>
            <% end %>
          </div>
        </div>

        <!-- フッター情報 -->
        <div class="text-center mt-4">
          <small class="text-muted">
            &copy; 2025 Mobilis. All rights reserved.
          </small>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- カスタムCSS -->
<style>
  .logo-container {
    display: inline-block;
    padding: 1.5rem;
    border-radius: 50%;
    background: linear-gradient(135deg, rgba(0, 212, 255, 0.1) 0%, rgba(0, 153, 204, 0.1) 100%);
    border: 2px solid rgba(0, 212, 255, 0.2);
  }
  
  .logo-image {
    width: 120px;
    height: 120px;
    object-fit: contain;
    filter: drop-shadow(0 4px 8px rgba(0, 212, 255, 0.3));
    transition: all 0.3s ease;
  }
  
  .logo-container:hover .logo-image {
    transform: scale(1.1);
    filter: drop-shadow(0 6px 12px rgba(0, 212, 255, 0.4));
  }
  
  .card {
    border-radius: 1rem;
  }
  
  .form-control:focus {
    border-color: #0d6efd;
    box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
  }
  
  .btn-primary {
    background: linear-gradient(135deg, #0d6efd 0%, #0b5ed7 100%);
    border: none;
    transition: all 0.3s ease;
  }
  
  .btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(13, 110, 253, 0.4);
  }
  
  .input-group-text {
    border-color: #dee2e6;
  }
  
  .form-control {
    border-color: #dee2e6;
  }
  
  .form-control:focus + .input-group-text {
    border-color: #0d6efd;
  }
  
  /* プレースホルダーの位置を強制的に左寄せに固定 */
  .form-control::placeholder {
    text-align: left !important;
  }
  
  .form-control:focus::placeholder {
    text-align: left !important;
  }
  
  /* 入力フィールドのテキストも左寄せに固定 */
  .form-control {
    text-align: left !important;
  }
  
  .form-control:focus {
    text-align: left !important;
  }
  
  /* より強力なセレクターで確実に左寄せを固定 */
  input[type="email"]::placeholder,
  input[type="password"]::placeholder {
    text-align: left !important;
  }
  
  input[type="email"]:focus::placeholder,
  input[type="password"]:focus::placeholder {
    text-align: left !important;
  }
  
  input[type="email"],
  input[type="password"] {
    text-align: left !important;
  }
  
  input[type="email"]:focus,
  input[type="password"]:focus {
    text-align: left !important;
  }
  
  /* さらに強力なセレクターで確実に左寄せを固定 */
  .form-control[type="email"]::placeholder,
  .form-control[type="password"]::placeholder {
    text-align: left !important;
    direction: ltr !important;
  }
  
  .form-control[type="email"]:focus::placeholder,
  .form-control[type="password"]:focus::placeholder {
    text-align: left !important;
    direction: ltr !important;
  }
  
  .form-control[type="email"],
  .form-control[type="password"] {
    text-align: left !important;
    direction: ltr !important;
  }
  
  .form-control[type="email"]:focus,
  .form-control[type="password"]:focus {
    text-align: left !important;
    direction: ltr !important;
  }
  
  /* インラインスタイルで強制的に左寄せ */
  input[type="email"] {
    text-align: left !important;
    direction: ltr !important;
  }
  
  input[type="password"] {
    text-align: left !important;
    direction: ltr !important;
  }
  
  /* すべての入力フィールドに対して強制的に左寄せ */
  *[type="email"]::placeholder,
  *[type="password"]::placeholder {
    text-align: left !important;
    direction: ltr !important;
    text-align-last: left !important;
  }
  
  *[type="email"]:focus::placeholder,
  *[type="password"]:focus::placeholder {
    text-align: left !important;
    direction: ltr !important;
    text-align-last: left !important;
  }
  
  *[type="email"],
  *[type="password"] {
    text-align: left !important;
    direction: ltr !important;
    text-align-last: left !important;
  }
  
  *[type="email"]:focus,
  *[type="password"]:focus {
    text-align: left !important;
    direction: ltr !important;
    text-align-last: left !important;
  }
  
  /* プレースホルダーとテキストの位置を完全に固定 */
  ::placeholder {
    text-align: left !important;
    direction: ltr !important;
    text-align-last: left !important;
  }
  
  :focus::placeholder {
    text-align: left !important;
    direction: ltr !important;
    text-align-last: left !important;
  }
  
  /* 入力フィールドのテキスト位置を完全に固定 */
  input {
    text-align: left !important;
    direction: ltr !important;
    text-align-last: left !important;
  }
  
  input:focus {
    text-align: left !important;
    direction: ltr !important;
    text-align-last: left !important;
  }
  
  /* 入力中のテキストを強制的に左寄せ */
  input[type="email"]:not(:placeholder-shown),
  input[type="password"]:not(:placeholder-shown) {
    text-align: left !important;
    direction: ltr !important;
    text-align-last: left !important;
  }
  
  /* 入力中のテキスト（プレースホルダーが非表示）を強制左寄せ */
  input:not(:placeholder-shown) {
    text-align: left !important;
    direction: ltr !important;
    text-align-last: left !important;
  }
  
  /* すべての状態でテキストを左寄せ */
  input[type="email"],
  input[type="password"],
  input[type="email"]:focus,
  input[type="password"]:focus,
  input[type="email"]:not(:placeholder-shown),
  input[type="password"]:not(:placeholder-shown),
  input[type="email"]:not(:placeholder-shown):focus,
  input[type="password"]:not(:placeholder-shown):focus {
    text-align: left !important;
    direction: ltr !important;
    text-align-last: left !important;
  }
</style>

<!-- シンプルなJavaScript修正 -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // 入力フィールドを取得
    const emailInput = document.querySelector('input[type="email"]');
    const passwordInput = document.querySelector('input[type="password"]');
    
    // シンプルな左寄せ関数
    function alignLeft(input) {
      if (input) {
        input.style.textAlign = 'left';
        input.style.direction = 'ltr';
      }
    }
    
    // 初期設定
    alignLeft(emailInput);
    alignLeft(passwordInput);
    
    // フォーカス時に適用
    if (emailInput) emailInput.addEventListener('focus', () => alignLeft(emailInput));
    if (passwordInput) passwordInput.addEventListener('focus', () => alignLeft(passwordInput));
  });
</script>
